# 自动分类

> 自动分类这个功能是由原有的语义识别进化而来。

# 规则编辑（可视化）

- 规则名称：字面意思，方便根据规则知道是怎么分类的

- 时间条件：这里给了两个时间条件填写位置，可以只填写一个也可以不填写。不填表示无限制。
  
  - 一共支持6种比较（点击左边的框框就会出现）：`=`、`>=`、`<=`、`<`、`>`、`!=`
  
- 商户名称条件：即识别出来的商户名。
  - 一共支持5种比较（点击左边的框框会出现）
  
  - 包含：表示含有即可，如 “王记包子铺”，其中就包含了“包子”。
  
  - 全等：表示完全相等，如 “王记包子铺” 与 “王记包子铺” 是包含关系。
  
  - 以...开头：字面意思，如 “王记包子铺” ，就是 以 “王记” 开头。
  
  - 以...结尾：字面意思，如 “王记包子铺” ，就是 以 “包子铺” 结尾。
  
  - 正则匹配到：这里是正则表达式的意思，如 “王记.*铺” 就可以匹配到 “王记包子铺”。
  
    > #### 正则注意：
    >
    > $
    > 匹配输入字符串的结尾位置。要匹配 $ 字符本身，请使用 `\$`。
    >
    > ( )
    > 标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用`\(` `\)` 。
    >
    > *
    > 匹配前面的子表达式零次或多次。要匹配 * 字符，请使用`\*`。
    >
    > +
    > 匹配前面的子表达式一次或多次。要匹配 + 字符，请使用`\+`。
    >
    > .
    > 匹配除换行符 \n之外的任何单字符。要匹配 .，请使用 `\.`。
    >
    > [ ]
    > 标记一个中括号表达式的开始。要匹配 [，请使用 `\[`。
    >
    > ?
    > 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，请使用` \?`。
    >
    > \
    > 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， ‘n' 匹配字符 ‘n'。'\n' 匹配换行符。序列 ‘\\' 匹配 “\”，而 ‘\(' 则匹配 “(”。
    >
    > ^
    > 匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。要匹配 ^ 字符本身，请使用 `\^`。
    >
    > { }
    > 标记限定符表达式的开始。要匹配 {，请使用 `\{`。
    >
    > |
    > 指明两项之间的一个选择。要匹配 |，请使用` \|`。
  >
    > 
    
    !> 正则表达式中禁止出现 `/`这个符号，会导致js执行错误。
  
- 商户备注：同上，如果不填写就是不限制。

- 消费类型满足：
  - 这里支持5种消费类型
  - 任意类型：顾名思义。是匹配任何类型，不限制。
  - 支出：指的是只匹配支出类型。
  - 收入：指的是只匹配收入类型。
  - 转账：指的是只匹配账户间转账类型，如支付宝与微信互相转账。
  - 信用还款：指的是只匹配到信用还款类型。
  - 报销：报销是收入的分支类型，具有主观性，无法被系统识别，故不在选项范围内。

- 账单类型满足：此处定义了15个支付宝账单类型与10个微信账单类型和1个短信账单类型

   - 任意类型
   - 支付宝转账到余额宝
   - 支付宝转账到账成功
   - 支付宝付款成功（支付宝发红包包含在内，无法有效甄别）
   - 支付宝转账成功
   - 支付宝退款
   - 支付宝收到一笔转账
   - 支付宝二维码收款
   - 支付宝余利宝
   - 支付宝余额宝
   - 支付宝笔笔攒
   - 支付宝商家付款到账
   - 支付宝收到红包
   - 支付宝网商银行还款
   - 支付宝余额宝自动转入
   - 支付宝无法识别的消息
   - 微信付款成功
   - 微信二维码收款
   - 微信转账给别人
   - 微信转账退款到账
   - 微信接收他人转账
   - 微信红包退款到账
   - 微信发红包给别人
   - 微信接收他人红包
   - 微信支付退款
   - 微信无法解析的消息类型
   - 短信


- 分类：这个就是对应到钱迹中的分类了。

# 编辑规则(JS)

> 如果觉得可视化编辑的规则无法满足，您可以直接使用JS编辑规则

!> 使用JS编辑过的规则将无法再使用可视化编辑。

## 基础框架

```js
if(条件)return "分类名";
```

## 可选条件

| 条件名     | 说明                                               |
| ---------- | -------------------------------------------------- |
| time       | 表示当前时间中的时                                 |
| type       | 消费类型，参考【编辑规则（可视化）- 消费类型满足】 |
| shopName   | 商户名称                                           |
| shopRemark | 商户备注信息                                       |
| source     | 账单类型，参考【编辑规则（可视化）- 账单类型满足】 |

